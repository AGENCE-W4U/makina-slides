<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>AngularJS - Jour 2</title>
    <!-- Styles -->
    <link rel="stylesheet" media="print" href="assets/landslide_theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="assets/landslide_theme/css/screen.css">
    <link rel="stylesheet" href="assets/landslide_theme/css/pygments.css">
    
    <!-- /Styles -->
    <!-- Javascripts -->
    <script type="text/javascript" src="assets/landslide_theme/js/slides.js"></script>
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="time">
      <span id="hours">00</span>:<span id="minutes">00</span>:<span id="seconds">00</span>
    </div>            
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>AngularJS - Jour 2</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              1/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide tighter">
          <div class="inner">
            
            
            <section><ul>
<li>Module et Injection de dépendance<ul>
<li>Principe de l'injection de dépendance</li>
<li>Notion de module</li>
<li>Découper son application</li>
</ul>
</li>
<li>Services<ul>
<li>Services disponibles</li>
<li>Services vs Factory</li>
</ul>
</li>
<li>Tests Unitaires<ul>
<li>Karma et Jasmine</li>
<li>Injection et mocks</li>
</ul>
</li>
<li>Tests End to End<ul>
<li>Protractor</li>
<li>Simuler un serveur HTTP</li>
</ul>
</li>
<li>Directive<ul>
<li>Créer ses directives</li>
<li>Vers des composants réutilisables</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              2/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Module et Injection de dépendance</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              3/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Principe de l'injection de dépendance</h1></header>
            
            
            <section><p>Comment AngularJS sait-il quelles services doivent-être passés au contrôleur ?</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;todo&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;TodoController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$routeParams</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">$routeParams</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>
</pre></div>

<p>Et en cas de minification ?</p>
<h1>Injection explicite</h1>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;todo&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;TodoController&#39;</span><span class="p">,</span>
              <span class="p">[</span><span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="s1">&#39;$routeParams&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$routeParams</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">$routeParams</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="c1">// ...</span>
  <span class="p">}]);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Le service <code>$injector</code> s'occupe de repérer les dépendances nécessaire.
En cas de minifaction, le nom des variable est modifié pour être raccourci. Il faut donc préciser les services nécessaires.</p>
<p>Écriture explicite préféré pour être sur de ses dépendances.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              4/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Notion de module</h1></header>
            
            
            <section><p>Un module :</p>
<ul>
<li>Permet de séparer le code du reste de l'application.</li>
<li>Est la manière principal de définir une application AngularJS (grâce à <code>ngApp</code>).</li>
</ul>
<p>Une application :</p>
<ul>
<li>Peut contenir plusieurs modules.</li>
</ul>
<h1>Définir un module</h1>
<div class="highlight"><pre><span></span><span class="c1">// Créer le module &#39;nom&#39;</span>
<span class="c1">// Le deuxième paramètre est la liste des dépendances du module.</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="c1">// Récupèrer le module.</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Exemple de dépendances : <code>ngRoute</code>.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              5/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide tighter">
          <div class="inner">
            
            <header><h1>Découper son application</h1></header>
            
            
            <section><p><code>angular-seed</code> est un bon modèle :</p>
<ul>
<li>Les fichiers de description (README, LICENSE, ...) et de configuration des outils du projet sont à la racine.</li>
<li>L'application en elle-même est contenue dans un dossier.</li>
<li>Chaque partie logique de l'application est mis dans son propre module. Chaque module a son propre dossier.<ul>
<li>Un module décrit ses propres contrôleurs, routes et templates.</li>
<li>Les directives et les filtres peuvent être mis dans des modules à part si ils sont réutilisable.</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>angular-seed</code> a un dossier <code>components</code> comprenants les filtres et directives.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              6/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Architecture</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="go">README</span>
<span class="go">LICENSE</span>
<span class="go">bower.json</span>
<span class="go">package.json</span>
<span class="go">app/</span>
<span class="go">├── app.js</span>
<span class="go">├── css/</span>
<span class="go">│   └── app.css</span>
<span class="go">├── img/</span>
<span class="go">├── index.html</span>
<span class="go">└── todo/</span>
<span class="go">    ├── partials/</span>
<span class="go">    │   ├── todo_list.html</span>
<span class="go">    │   └── todo_single.html</span>
<span class="go">    ├── todo.js</span>
<span class="go">    └── todo_test.js</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              7/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>TP - Création d'une ToDo List - 5</h1></header>
            
            
            <section><ul>
<li>Re-cloner <code>angular-seed</code>.<ul>
<li>Regarder l'architecture du projet.</li>
<li>Regarder les fichier app.js, view1.js et view2.js.</li>
<li>Comprendre le découpage de l'application.</li>
</ul>
</li>
<li>Découper l'application de ToDo List pour reproduire la même architecture.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              8/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Services</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              9/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Définition</h1></header>
            
            
            <section><p>Un service :</p>
<ul>
<li>Est un singleton.</li>
<li>Est un objet, une chaine de caractères, une valeur.</li>
<li>Permet de partager du code métier et/ou des objets entre contrôleurs.<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;todo&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;TodoController&#39;</span><span class="p">,</span>
              <span class="p">[</span><span class="s1">&#39;$routeParams&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$routeParams</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}]);</span>
</pre></div>

</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Un singleton est un objet qui n'est créé qu'une fois. Il n'est donc présent qu'une fois en mémoire et c'est le même qui est toujours utilisé.
<code>$routeParams</code> est un service. <code>$scope</code> est un cas particulier.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              10/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Services disponibles</h1></header>
            
            
            <section><p>Les services du core commencent par <code>$</code>.</p>
<ul>
<li><code>$filter</code> : Appliquer des filtres.</li>
<li><code>$http</code> : Faire des requêtes HTTP.</li>
<li><code>$interpolate</code> : Évaluer des expressions.</li>
<li><code>$location</code> : Récupérer ou agir sur l'URL.</li>
<li><code>$q</code> : Faire des promesses.</li>
<li><code>$rootScope</code></li>
<li><code>$document</code>, <code>$window</code>, <code>$timeout</code>, <code>$interval</code></li>
<li><a href="https://docs.angularjs.org/api/ng/service">...</a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>$document</code>, <code>$window</code>, <code>$timeout</code>, <code>$interval</code> sont des wrappers pour leur équivalent JS.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              11/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Services vs Factory</h1></header>
            
            
            <section><p>Ou comment créer un service.</p>
<h2>Factory</h2>
<p>Une <code>factory</code> retourne le service demandé.</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>
      <span class="p">},</span>
    <span class="p">};</span>
  <span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              12/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Services vs Factory</h1></header>
            
            
            <section><h2>Service</h2>
<p><code>service</code> peut être utilisé en tant que constructeur du service.</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hello</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>
      <span class="p">};</span>
  <span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Service déjà créer et accessible par <code>this</code>.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              13/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Constant et Value</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">constant</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1&#39;</span><span class="p">);</span>

<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1&#39;</span><span class="p">);</span>
</pre></div>

<p><code>constant</code> peut être utilisé lors d'un <code>config</code> alors que <code>value</code> ne peut pas.</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">constant</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1&#39;</span><span class="p">);</span>
  <span class="p">.</span><span class="nx">config</span><span class="p">([</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Ok</span>
  <span class="p">}])</span>

<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1&#39;</span><span class="p">);</span>
  <span class="p">.</span><span class="nx">config</span><span class="p">([</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Error</span>
  <span class="p">}])</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              14/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>provider et $provide</h1></header>
            
            
            <section><p>Un provider n'est accessible que durant la phase de configuration (et donc dans les <code>.config()</code>).
<code>$provide</code> permet de définir ou redéfinir un service dynamiquement.</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s1">&#39;ServiceProvider&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">$get</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">myService</span><span class="o">:</span> <span class="nx">True</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">};</span>
  <span class="p">});</span>

  <span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="s1">&#39;TestController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$provide</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$provide</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;ServiceProvider&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">myService</span><span class="o">:</span> <span class="nx">False</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">});</span>
  <span class="p">})</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>provider</code> est utilisé par les autres systemes de création de services.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              15/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>TP - Création d'une ToDo List - 6</h1></header>
            
            
            <section><ul>
<li>Créer un service permettant de :<ul>
<li>Stocker la ToDo List.</li>
<li>Récuperer la liste.</li>
<li>Manipuler la liste (ajouter/supprimer).</li>
<li>Récuperer une tache par son <code>id</code>.</li>
</ul>
</li>
<li>Utiliser ce service dans les contrôleurs.</li>
<li>Utiliser le localStorage dans ce service pour stocker la liste.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              16/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Tests Unitaires</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              17/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Karma</h1></header>
            
            
            <section><ul>
<li>Application NodeJS créer pour AngularJS.</li>
<li>Tests unitaires.</li>
<li>Detecte les modifications du code.</li>
<li>Relance automatiquement les tests.</li>
<li>Utilise les navigateurs pour faire tourner les tests. Karma peut :<ul>
<li>Lancer automatiquement les navigateurs au démarrage.</li>
<li>Accepter les connexions de navigateurs distant (simplifie grandement les tests sur mobile, tablette, IE, ...).</li>
</ul>
</li>
<li>Plusieurs frameworks de tests disponible.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              18/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Karma - Installation, configuration et lancement</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="go">npm install karma karma-chrome-launcher</span>
<span class="go">./node_modules/.bin/karma init karma.conf.js</span>
<span class="go">./node_modules/.bin/karma start karma.conf.js</span>

<span class="go">sudo npm install -g karma-cli</span>
<span class="go">karma start</span>

<span class="gp">#</span> Ou avec angular-seed
<span class="go">npm test</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>npm install</code> permet d'installer les paquets Node.js.
Les paquets sont installé dans <code>node_modules</code> et les binaires se retrouvent dans <code>node_modules/.bin</code>.</p>
<p><code>karma-cli</code> permet d'avoir un executable <code>karma</code> qui va chercher le binaire karma courant.</p>
<p><code>npm test</code> permet de lancer le script <code>test</code> qui se trouve dans <code>package.json</code>.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              19/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Jasmine</h1></header>
            
            
            <section><ul>
<li>Framework de test.</li>
<li>"behavior-driven".</li>
<li>Facile d'installation :<div class="highlight"><pre><span></span><span class="go">npm install karma-jasmine</span>
</pre></div>

</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>"behavior-driven" signifie que l'on décrit les composants à tester, ce qu'il devrait faire et ce que l'on attends d'eux.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              20/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Jasmine - Suites</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: TodoController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// Specs go in here</span>
<span class="p">});</span>


<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: TodoController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// Specs go in here</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              21/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Jasmine - Specs, Expectations</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: TodoController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should be true&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: TodoController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">a</span><span class="p">;</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should be true&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>

<p><a href="https://github.com/pivotal/jasmine/wiki/Matchers">Plus d'"expectation"</a>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              22/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Jasmine - Setup, Teardown</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;A spec (with setup and tear-down)&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">foo</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">afterEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;is just a function, so it can contain any code&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;can have more than one expectation&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Effectuer certaines taches avant et/ou après chaque test.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              23/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Jasmine - Spies</h1></header>
            
            
            <section><p>L'API a changé entre Jasmine 1.x et 2.x !
Permet de simuler des fonctions/objets le temps d'un <code>describe</code>/<code>it</code>.</p>
<div class="highlight"><pre><span></span><span class="c1">// Jasmine 2.0</span>
<span class="nx">service</span> <span class="o">=</span> <span class="p">{</span>
   <span class="nx">test</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">42</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">};</span>
<span class="nx">SpyOn</span><span class="p">(</span><span class="nx">service</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">);</span>
<span class="nx">service</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">service</span><span class="p">.</span><span class="nx">test</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">service</span><span class="p">.</span><span class="nx">test</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="nx">SpyOn</span><span class="p">(</span><span class="nx">service</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">).</span><span class="nx">and</span><span class="p">.</span><span class="nx">returnValue</span><span class="p">(</span><span class="mi">21</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="nx">service</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">test</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">21</span><span class="p">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              24/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Jasmine - Spies</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">// Jasmine 2.0</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s1">&#39;foobar&#39;</span><span class="p">);</span>
<span class="nx">foobar</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">);</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">foobar</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">);</span>

<span class="c1">// Créer un objet avec plusieurs spies</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s1">&#39;service&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">]);</span>
<span class="nx">service</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">service</span><span class="p">.</span><span class="nx">create</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
</pre></div>

<p><a href="http://jasmine.github.io/2.0/introduction.html#section-Spies">Documentation Spies</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              25/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Injection et mocks</h1></header>
            
            
            <section><p>Un mock permet de tester et de simuler le fonctionnement d'un composant métier.
Pensez à inclure <code>angular-mocks.js</code> dans la configuration de <code>karma</code>.</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;v1.0.1&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;MyApp&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Charger le module &#39;myApp&#39;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">));</span>

  <span class="c1">// Puis injecter le service &#39;version&#39;</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should provide a version&#39;</span><span class="p">,</span> <span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">version</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;v1.0.1&#39;</span><span class="p">);</span>
  <span class="p">}));</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>beforeEach(module('myApp'));</code> permet de définir les modules contenants les composants à injecter.
Il est possible d'injecter des composants en utilisant <code>angular.mock.inject</code>.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              26/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Injection et mocks</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[]).</span><span class="nx">value</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;v1.0.1&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;MyApp&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">version</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">));</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_version_</span><span class="p">){</span>
    <span class="nx">version</span> <span class="o">=</span> <span class="nx">_version_</span><span class="p">;</span>
  <span class="p">}));</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should provide a version&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">version</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;v1.0.1&#39;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;MyApp - $provide&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should provide a version&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">module</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$provide</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$provide</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;VERSION&#39;</span><span class="p">);</span>
    <span class="p">})</span>

    <span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">version</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;VERSION&#39;</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>inject</code> est également présent sur <code>window</code> et peut donc être accédé directement.
On peut utiliser <code>inject</code> dans un <code>beforeEach</code> pour avoir le composant dans tout les tests.
Pour ne pas surcharger la variable local, le service peut être injécté avec des "_" autour.
<code>$provide</code> permet de remplacer un service.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              27/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Tester les différents composants - Contrôleur</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: controller&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">MyController</span><span class="p">,</span> <span class="nx">scope</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">));</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$controller</span><span class="p">,</span> <span class="nx">$rootScope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">scope</span> <span class="o">=</span> <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$new</span><span class="p">();</span>
    <span class="nx">MyController</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s1">&#39;MyController&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
  <span class="p">}));</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Le service <code>$controller</code> permet de créer un nouveau contrôleur.
Les services injecté peuvent être passé en paramètres afin de les contrôler.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              28/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Tester les différents composants - Service</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: Service&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">service</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">));</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_service_</span><span class="p">){</span>
    <span class="nx">service</span> <span class="o">=</span> <span class="nx">_service_</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Le service sera injecté dans tout les tests.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              29/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Tester les différents composants - Filtres</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: Service&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">filter</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">));</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$filter</span><span class="p">){</span>
    <span class="nx">filter</span> <span class="o">=</span> <span class="nx">$filter</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should works&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">)(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">2</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;123.00&#39;</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>$filter</code> est utilisé pour récupérer tout les filtres.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              30/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Tester les différents composants - Directives</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit test: Service&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">scope</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">));</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$compile</span><span class="p">,</span> <span class="nx">$rootScope</span><span class="p">){</span>
    <span class="nx">scope</span> <span class="o">=</span> <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$new</span><span class="p">();</span>
    <span class="nx">element</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="s1">&#39;&lt;my-directive&gt;&lt;/my-directive&gt;&#39;</span><span class="p">);</span>
    <span class="nx">$compile</span><span class="p">(</span><span class="nx">element</span><span class="p">)(</span><span class="nx">scope</span><span class="p">);</span>
    <span class="nx">scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should works&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;new value&#39;</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">html</span><span class="p">()).</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">&#39;new value&#39;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Créer un nouvel element HTML avec angular.
<code>$compile</code> nous permet de transformer le texte HTML avec angular.
<code>$apply</code> permet d'executer du code dans angular en dehors du framework.
Il execute aussi les divers méthodes de <code>watch</code> (<code>$digest</code>) et permet donc de mettre à jour les élements compilés.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              31/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>TP - Création d'une ToDo List - 7</h1></header>
            
            
            <section><ul>
<li>Lire la configuration karma d'<code>angular-seed</code>.</li>
<li>Écrire une série de tests unitaires pour l'application <code>todo</code>.</li>
<li>Faire tourner les tests.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              32/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Tests End to End</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              33/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Protractor</h1></header>
            
            
            <section><ul>
<li>Application NodeJS créer pour AngularJS.</li>
<li>Tests fonctionnels.</li>
<li>Basé sur WebDriverJS.</li>
<li>Utilise les navigateurs pour faire tourner les tests.</li>
<li>Plusieurs frameworks de tests disponible.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Le serveur doit tourner pour permettre de tester comme un véritable utilisateur.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              34/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Protractor - Installation</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="go">npm install protractor</span>
<span class="go">./node_modules/.bin/webdriver-manager update</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Met à jour les drivers utilisés pour contrôler les navigateurs.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              35/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Protractor - Configuration</h1></header>
            
            
            <section><p><code>protractor.conf.js</code></p>
<div class="highlight"><pre><span></span><span class="nx">exports</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">specs</span><span class="o">:</span> <span class="p">[</span>
    <span class="s1">&#39;*.js&#39;</span>
  <span class="p">],</span>

  <span class="nx">capabilities</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;browserName&#39;</span><span class="o">:</span> <span class="s1">&#39;chrome&#39;</span><span class="p">,</span>
    <span class="c1">// A partir de chrome 35</span>
    <span class="s1">&#39;chromeOptions&#39;</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;--test-type&#39;</span><span class="p">]</span>
    <span class="p">},</span>
  <span class="p">},</span>

  <span class="nx">baseUrl</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8000/app/&#39;</span><span class="p">,</span>

  <span class="nx">framework</span><span class="o">:</span> <span class="s1">&#39;jasmine&#39;</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p><code>specs</code> : fichier de tests protractor (Il n'y a plus d'accès direct aux fichiers de l'application).
<code>capabilities</code> : les navigateurs sur lesquelles tester.
<code>baseUrl</code> : L'URL de l'application.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              36/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Protractor - Lancement</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="gp">#</span> Le serveur doit être lancé pour pouvoir lancer les tests fonctionnels
<span class="go">./node_modules/.bin/protractor protractor.conf.js</span>

<span class="go">!console</span>
<span class="gp">#</span> Ou avec angular-seed
<span class="go">npm run-script protractor</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              37/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Jasmine - End to End</h1></header>
            
            
            <section><p><a href="http://angular.github.io/protractor/#/locators">Locators</a></p>
<div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;angularjs homepage&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">firstNumber</span> <span class="o">=</span> <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">));</span>
  <span class="kd">var</span> <span class="nx">secondNumber</span> <span class="o">=</span> <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">));</span>
  <span class="kd">var</span> <span class="nx">goButton</span> <span class="o">=</span> <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s1">&#39;gobutton&#39;</span><span class="p">));</span>
  <span class="kd">var</span> <span class="nx">latestResult</span> <span class="o">=</span> <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">binding</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">));</span>
  <span class="kd">var</span> <span class="nx">history</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">&#39;result in memory&#39;</span><span class="p">));</span>

  <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">firstNumber</span><span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="nx">secondNumber</span><span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="nx">goButton</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">browser</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://juliemr.github.io/protractor-demo/&#39;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should have a history&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nx">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">history</span><span class="p">.</span><span class="nx">count</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Les <code>locators</code> sont des méthodes permettant de récuperer les éléments de la page HTML.
Bonne pratique de préparer les elements avant et de faire des fonctions pour les parties logiques réutilisées.
Les éléments ne seront trouvé qu'au moment de l'action.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              38/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Simuler un serveur HTTP</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Unit Test: HTTP&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">$httpBackend</span><span class="p">,</span> <span class="nx">myService</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_$httpBackend_</span><span class="p">,</span> <span class="nx">_myService_</span><span class="p">){</span>
    <span class="nx">$httpBackend</span> <span class="o">=</span> <span class="nx">_$httpBackend_</span><span class="p">;</span>
    <span class="c1">// Imaginons que myService est un service faisant des requêtes pour nous.</span>
    <span class="nx">myService</span> <span class="o">=</span> <span class="nx">_myService_</span><span class="p">;</span>
  <span class="p">}));</span>

  <span class="nx">afterEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// Il faut s&#39;assurer qu&#39;il ne reste pas de requêtes</span>
    <span class="c1">// ou d&#39;attentes à la fin de chaque test.</span>
    <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">verifyNoOutstandingExpectation</span><span class="p">();</span>
    <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">verifyNoOutstandingRequest</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should make a request&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/v1/api/current_user&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="nx">userId</span><span class="o">:</span> <span class="mi">123</span><span class="p">});</span>
    <span class="nx">myService</span><span class="p">.</span><span class="nx">getCurrentUser</span><span class="p">();</span>
    <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>

<p><a href="https://code.angularjs.org/1.2.26/docs/api/ngMock/service/$httpBackend"><code>$httpBackend</code></a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Dans le cas des tests unitaires, il faut pouvoir simuler un serveur HTTP pour ne tester que la fonctionnalité recherchée et pas la connexion ou le serveur distant.</p>
<p><code>$httpBackend.expect()</code> vérifie que la requête soit bien partis et permet de gérer la réponse.
<code>$httpBackend.flush()</code> permet de s'assurer que les réponses soit bien envoyées.</p>
<p><code>$httpBackend.verifyNoOutstandingExpectation()</code> et <code>$httpBackend.verifyNoOutstandingRequest()</code> vont s'occuper de ces vérifications.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              39/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>TP - Création d'une ToDo List - 8</h1></header>
            
            
            <section><ul>
<li>Lire la configuration protractor et les tests e2e d'<code>angular-seed</code>.</li>
<li>Écrire une série de tests fonctionnels pour l'application <code>todo</code>.</li>
<li>Faire tourner les tests.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              40/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Directive</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              41/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Définitions</h1></header>
            
            
            <section><p>Une directive permet d'étendre le language HTML.</p>
<p>Les formes les plus courantes de directives sont les suivantes :</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">my-directive</span><span class="o">=</span><span class="s">&quot;value&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">my-directive</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">my-directive</span><span class="p">&gt;&lt;/</span><span class="nt">my-directive</span><span class="p">&gt;</span>
</pre></div>

<h2>Créer une directive</h2>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;myDirective&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="c1">// Options</span>
    <span class="p">};</span>
  <span class="p">});</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              42/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Options</h1></header>
            
            
            <section><ul>
<li><code>restrict</code> : Indique de quelle manière une directive peut être utilisé. <code>A</code> pour attribut et <code>E</code> pour element.</li>
<li><code>template</code>/<code>templateUrl</code> : Template ou url vers le template ("partial") à utiliser.</li>
<li><code>replace</code> : Si <code>true</code>, le template remplace le block plutot que d'etre ajouté à la fin.</li>
<li><code>scope</code> : Si <code>true</code>, un nouveau scope sera créer pour la directive. Peut également être un objet décrivant les valeurs du scope.</li>
<li><code>controller</code> : Le contrôleur à utiliser pour gérer la directive.</li>
</ul>
<p><a href="https://docs.angularjs.org/api/ng/service/$compile#directive-definition-object">Options possible</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              43/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Exemple</h1></header>
            
            
            <section><p>Fichier JS :</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;myDirective&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;AE&#39;</span><span class="p">,</span>
      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;a href=&quot;google.com&quot;&gt;Google&lt;/a&gt;&#39;</span><span class="p">,</span>
      <span class="nx">replace</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">});</span>
</pre></div>

<p>Fichier HTML :</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">my-directive</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">my-directive</span><span class="p">&gt;&lt;/</span><span class="nt">my-directive</span><span class="p">&gt;</span>
</pre></div>

<p>Résultat :</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;google.com&quot;</span><span class="p">&gt;</span>Google<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;google.com&quot;</span><span class="p">&gt;</span>Google<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Noter que la directive est créer en camelCase mais est utilisé en lower-case.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              44/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Exemple</h1></header>
            
            
            <section><p>Fichier JS :</p>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;myDirective&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span>
      <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/my-directive.html&#39;</span><span class="p">,</span>
      <span class="nx">scope</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
</pre></div>

<p>Fichier HTML :</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">my-directive</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&#39;foobar&#39;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">my-directive</span><span class="p">&gt;</span>
</pre></div>

<p>Fichier <code>partials/my-directive.html</code> :</p>
<div class="highlight"><pre><span></span>{{ value }}
</pre></div>

<p>Résultat :</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">my-directive</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&#39;foobar&#39;&quot;</span><span class="p">&gt;</span>foobar<span class="p">&lt;/</span><span class="nt">my-directive</span><span class="p">&gt;</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              45/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Vers des composants réutilisables</h1></header>
            
            
            <section><p>Les directives permettent d'étendre le langage HTML.</p>
<p>Les filtres permettent de modifier la manière dont les données sont affichées.</p>
<p>Les services mettent à disposition du code métier.</p>
<p>Plus un composant est générique, plus il est réutilisable. Au contraire, un composant métier qui n'est utilisé qu'une fois n'a pas besoin d'être générique. Il faut trouver le juste milieu.</p>
<p>Voir le dossier <code>components</code> de <code>angular-seed</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
              <p>Composants générique = plus de temps de dév la première fois et moins les suivantes.</p>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              46/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>TP - Création d'une ToDo List - 9</h1></header>
            
            
            <section><ul>
<li>Créer une directive permettant l'affichage d'une tache. Elle doit :<ul>
<li>Prendre en paramètre la tache et la methode d'affichage de la date.</li>
</ul>
</li>
<li>Remplacer le listing des taches et l'affichage d'une tache simple par cette directive.</li>
<li>Tester cette directive.</li>
<li>Rajouter les boutons de modification/suppression dans cette directive.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              47/48
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: angular/human-coders/formation-angularjs-hc-jour2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Questions ?</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="angular/human-coders/formation-angularjs-hc-jour2.md">angular/human-coders/formation-angularjs-hc-jour2.md</a>
            </aside>
            
            <aside class="page_number">
              48/48
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">AngularJS - Jour 2</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">-</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Module et Injection de dépendance</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Principe de l'injection de dépendance</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Notion de module</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Découper son application</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Architecture</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">TP - Création d'une ToDo List - 5</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Services</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">Définition</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">Services disponibles</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Services vs Factory</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Services vs Factory</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Constant et Value</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">provider et $provide</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">TP - Création d'une ToDo List - 6</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Tests Unitaires</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">Karma</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Karma - Installation, configuration et lancement</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Jasmine</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Jasmine - Suites</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Jasmine - Specs, Expectations</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">Jasmine - Setup, Teardown</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">Jasmine - Spies</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">Jasmine - Spies</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">Injection et mocks</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Injection et mocks</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Tester les différents composants - Contrôleur</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">Tester les différents composants - Service</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">Tester les différents composants - Filtres</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">Tester les différents composants - Directives</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">TP - Création d'une ToDo List - 7</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">Tests End to End</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">Protractor</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">Protractor - Installation</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">Protractor - Configuration</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">Protractor - Lancement</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">Jasmine - End to End</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">Simuler un serveur HTTP</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">TP - Création d'une ToDo List - 8</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">Directive</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">Définitions</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">Options</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">Exemple</a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">Exemple</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
      <tr id="toc-row-46">
        <th><a href="#slide46">Vers des composants réutilisables</a></th>
        <td><a href="#slide46">46</a></td>
      </tr>
      
      
      <tr id="toc-row-47">
        <th><a href="#slide47">TP - Création d'une ToDo List - 9</a></th>
        <td><a href="#slide47">47</a></td>
      </tr>
      
      
      <tr id="toc-row-48">
        <th><a href="#slide48">Questions ?</a></th>
        <td><a href="#slide48">48</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Autoscale</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>f</td>
      </tr>
      <tr>
        <th>Presenter view</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Blank screen</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>$().landslide();</script>
</body>
</html>